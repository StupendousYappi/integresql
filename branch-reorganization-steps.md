# Branch Reorganization - Manual Steps Required

## Current Status

The branches have been successfully reorganized **locally**:

### `agent-setup` branch
- **Current state**: Contains only the AGENTS.md commit (ca1a85f)
- **Remote state**: Still contains all 4 commits (AGENTS.md + features)
- **Files**: Contains AGENTS.md, keeps original Makefile

### `db-creation-strategy` branch (NEW)
- **Current state**: Contains 3 feature commits (rebased onto base)
  - b8a30db: "Replacing Makefile with justfile"
  - aedc542: "Add Postgres strategy clause"
  - 2a1a251: "Bugfix for package name error"
- **Remote state**: Not yet pushed
- **Files**: Contains justfile, manager changes, devcontainer changes (NO AGENTS.md)

## Required Manual Steps

Since force-pushing requires elevated permissions, you'll need to complete these steps manually:

### Step 1: Push the new `db-creation-strategy` branch
```bash
git push -u origin db-creation-strategy
```

### Step 2: Force-update the `agent-setup` branch
```bash
git push --force-with-lease origin agent-setup
```

### Step 3: Create PR for AGENTS.md
After pushing, create a pull request from `agent-setup` to `main`:
```bash
gh pr create --base main --head agent-setup --title "Add AGENTS.md documentation" --body "Adding AGENTS.md file with coding guidance for AI agents."
```

Or use the GitHub web interface to create the PR.

### Step 4: (Optional) Create PR for db-creation-strategy
If you want to create a PR for the feature work as well:
```bash
gh pr create --base main --head db-creation-strategy --title "Database creation strategy improvements" --body "Implements database creation strategy with justfile and related improvements."
```

## Verification Commands

To verify the local state:

```bash
# Check agent-setup has only AGENTS.md commit
git log --oneline agent-setup -5
# Should show: ca1a85f Adding autogenerated AGENTS.md file.

# Check db-creation-strategy has 3 feature commits
git log --oneline 9e395cd..db-creation-strategy
# Should show the 3 rebased commits

# Verify file presence
git ls-tree agent-setup --name-only | grep -E "(AGENTS|justfile)"
# Should show: AGENTS.md (no justfile)

git ls-tree db-creation-strategy --name-only | grep -E "(AGENTS|justfile)"
# Should show: justfile (no AGENTS.md)
```

## What Was Done

1. ✅ Created `db-creation-strategy` branch from commit 777f961
2. ✅ Rebased `db-creation-strategy` to remove the AGENTS.md commit using `git rebase --onto`
3. ✅ Reset `agent-setup` to only include commit ca1a85f (AGENTS.md)
4. ⏸️  Awaiting force-push permissions to update remote branches

## Why Force Push Is Needed

The `agent-setup` branch on the remote currently contains:
```
777f961 - Bugfix for package name error
3fdbbba - Add Postgres strategy clause
9d8491f - Replacing Makefile with justfile
ca1a85f - Adding autogenerated AGENTS.md file
```

We need to rewrite it to only contain:
```
ca1a85f - Adding autogenerated AGENTS.md file
```

This requires a force push because we're removing commits from the branch history.
